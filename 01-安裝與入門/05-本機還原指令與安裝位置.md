# Clawdbot 本機還原指令與安裝位置

**更新日期**: 2026-01-30

---

## 一、目前狀態摘要

| 項目 | 路徑 |
|------|------|
| **備份解壓位置** | `/Users/user/Downloads/備份指南/clawdbot-backup/` |
| **Clawdbot 指令** | `/Users/user/.nvm/versions/node/v24.13.0/bin/clawdbot` |
| **Clawdbot 套件（安裝目錄）** | `/Users/user/.nvm/versions/node/v24.13.0/lib/node_modules/clawdbot` |
| **還原目標：設定與資料** | `~/.clawdbot/`（即 `/Users/user/.clawdbot/`） |
| **還原目標：工作區技能** | `~/clawd/skills/`（即 `/Users/user/clawd/skills/`） |

說明：本機使用 **NVM** 管理 Node，Clawdbot 是透過 `npm install -g clawdbot` 安裝在當前 NVM Node 版本下，因此路徑在 `~/.nvm/versions/node/v24.13.0/`，而非 `/usr/local/lib/node_modules/`。

---

## 二、請在本機終端機執行的還原

### 方式 A：執行還原腳本（建議）

同資料夾內已有一支 **`執行還原.sh`**，在 **終端機（Terminal）** 執行：

```bash
cd "/Users/user/Downloads/備份指南"
./執行還原.sh
```

依提示按 Enter 即會還原到 `~/.clawdbot` 與 `~/clawd/skills`。

### 方式 B：手動貼上指令

請打開 **終端機（Terminal）**，依序貼上並執行以下指令。

### 1. 還原到 ~/.clawdbot

```bash
BACKUP="/Users/user/Downloads/備份指南/clawdbot-backup"

mkdir -p ~/.clawdbot

cp "$BACKUP/clawdbot.json" ~/.clawdbot/
cp -R "$BACKUP/agents" ~/.clawdbot/
cp -R "$BACKUP/memory" ~/.clawdbot/
cp -R "$BACKUP/credentials" ~/.clawdbot/
cp -R "$BACKUP/devices" ~/.clawdbot/
cp -R "$BACKUP/identity" ~/.clawdbot/
cp -R "$BACKUP/cron" ~/.clawdbot/
cp -R "$BACKUP/telegram" ~/.clawdbot/
cp "$BACKUP/exec-approvals.json" ~/.clawdbot/ 2>/dev/null || true

mkdir -p ~/.clawdbot/media
cp -R "$BACKUP/media/inbound" ~/.clawdbot/media/
cp -R "$BACKUP/media/outbound" ~/.clawdbot/media/ 2>/dev/null || true
```

### 2. 還原工作區技能到 ~/clawd/skills

```bash
mkdir -p ~/clawd
cp -R "/Users/user/Downloads/備份指南/clawdbot-backup/skills" ~/clawd/
```

### 3. 驗證還原

```bash
clawdbot status
ls -la ~/.clawdbot/clawdbot.json
ls -la ~/.clawdbot/agents/main/agent/
ls -la ~/.clawdbot/memory/
ls ~/clawd/skills/
```

若以上檔案與目錄都存在，且 `clawdbot status` 正常，即表示還原完成。

---

## 三、若新電腦使用者名稱不是 `user`

請編輯 `~/.clawdbot/clawdbot.json`，找到 `agents.defaults.workspace`，將路徑改為新電腦的實際路徑（例如 `/Users/你的使用者名稱/clawd`）。

---

## 四、進階：舊電腦曾改過的程式（可選）

若舊電腦曾修改過 Clawdbot 或 ai-pdf-builder 的程式碼，本機對應路徑為：

- **Clawdbot 套件**：`/Users/user/.nvm/versions/node/v24.13.0/lib/node_modules/clawdbot/`
  - 例如：`dist/infra/unhandled-rejections.js`、`dist/daemon/service-env.js`
- **ai-pdf-builder**（若已全域安裝）：  
  `/Users/user/.nvm/versions/node/v24.13.0/lib/node_modules/ai-pdf-builder/`  
  - 例如：`dist/index.js`、`dist/cli.js`（改為 xelatex）

依《Clawdbot-新電腦還原與安裝指南》第七節說明，手動再改一次即可。
